<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="product_more_from_wardrobe" inherit_id="website_sale.product" name="Meer uit deze kast">

        <xpath expr="//section[@id='product_detail']" position="after">

            <t t-if="product.submission_id">

                <t t-set="wardrobe_items"
                   t-value="product.submission_id.product_ids.filtered(lambda p: p.id != product.id and p.is_published and p.qty_available > 0)[:4]"/>

                <div t-if="wardrobe_items" class="container-fluid bg-light py-5">
                    <div class="container">
                        <div class="row mb-4">
                            <div class="col-12 text-center">
                                <h3 class="text-primary">ðŸ¦¦ Meer uit deze kleerkast ðŸ¦©</h3>
                                <hr class="w-25 mx-auto border-primary"/>
                            </div>
                        </div>

                        <div class="row">
                            <t t-foreach="wardrobe_items" t-as="item">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="card h-100 border-0 shadow-sm">
                                        <a t-att-href="'/shop/product/%s' % slug(item)" style="text-decoration: none;">
                                            <div class="position-relative overflow-hidden" style="height: 250px;">
                                                <img t-att-src="image_data_uri(item.image_512)"
                                                     class="card-img-top w-100 h-100"
                                                     style="object-fit: cover;"
                                                     alt="Product Image"/>

                                                <span t-if="item.x_old_id == 'new'" class="badge bg-success position-absolute top-0 end-0 m-2">Nieuw</span>
                                            </div>

                                            <div class="card-body p-3 text-center bg-white">
                                                <h6 class="card-title text-dark text-truncate mb-2">
                                                    <span t-field="item.name"/>
                                                </h6>
                                                <div class="fw-bold text-primary" style="font-size: 1.1em;">
                                                    <span t-field="item.list_price"
                                                          t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </xpath>
    </template>
</odoo>