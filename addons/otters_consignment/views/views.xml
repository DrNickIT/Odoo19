<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_consignment_submission_list" model="ir.ui.view">
        <field name="name">consignment.submission.list</field>
        <field name="model">otters.consignment.submission</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="supplier_id"/>
                <field name="submission_date"/>
                <field name="payout_method"/>
                <field name="payout_percentage" widget="percentage"/>
                <field name="state" widget="badge"/>
            </list>
        </field>
    </record>

    <record id="view_consignment_product_simple_form" model="ir.ui.view">
        <field name="name">consignment.product.simple.form</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <field name="image_1920" widget="image" class="oe_avatar"/>
                        <group>
                            <field name="name" required="1"/>
                            <field name="is_storable" string="Voorraad bijhouden"/>
                            <field name="qty_available" string="Aanwezige Voorraad"
                                   invisible="not is_storable"/>
                            <field name="public_categ_ids" widget="many2many_tags"/>
                            <field name="list_price"/>
                            <field name="condition_rating"
                                   widget="priority"
                                   options='{"type": "star", "max": 5}'/>
                        </group>
                    </group>
                    <notebook>

                        <page string="Kenmerken (Geslacht, Seizoen, etc.)">
                            <field name="attribute_line_ids">
                                <list editable="bottom">
                                    <field name="attribute_id" required="1"/>
                                    <field name="value_ids" widget="many2many_tags"
                                           options="{'no_create_edit': True}"
                                           domain="[('attribute_id', '=', attribute_id)]"
                                           string="Waarden"/>
                                </list>
                            </field>
                            <p class="text-muted">
                                Gebruik dit om kenmerken (zoals Geslacht of Seizoen) toe te wijzen.
                            </p>
                        </page>

                        <page string="Extra Afbeeldingen">
                            <field name="product_template_image_ids">
                                <list editable="bottom">
                                    <field name="name"/>
                                    <field name="image_1920" widget="image" options="{'size': [50, 50]}"/>
                                </list>
                            </field>
                        </page>

                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_consignment_submission_form" model="ir.ui.view">
        <field name="name">consignment.submission.form</field>
        <field name="model">otters.consignment.submission</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="%(action_import_products_wizard)d"
                            string="Importeer Producten (CSV)"
                            type="action"
                            class="oe_highlight"/>
                </header>
                <sheet>
                    <div class="oe_title"><h1><field name="name" readonly="1"/></h1></div>
                    <group>
                        <field name="supplier_id"/>
                        <field name="submission_date"/>
                        <field name="state"/>
                    </group>
                    <group string="Uitbetalingsafspraken">
                        <field name="payout_method"/>
                        <field name="payout_percentage" widget="percentage"/>
                    </group>
                    <notebook>
                        <page string="Producten">
                            <field name="product_ids" context="{'form_view_ref': 'otters_consignment.view_consignment_product_simple_form', 'default_is_published': True}"
                                   options="{'no_open': False}">
                                <list>
                                    <field name="name"/>
                                    <field name="public_categ_ids" widget="many2many_tags"/>
                                    <field name="attribute_line_ids" string="Kenmerken" widget="many2many"/>
                                    <field name="list_price"/>
                                    <field name="qty_available" string="Voorraad"/>
                                    <field name="is_published" string="Gepubliceerd"/>
                                    <field name="condition_rating"
                                           string="Staat"
                                           widget="priority"
                                           options='{"type": "star", "max": 5}'/>
                                    <field name="list_price"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_consignment_submission" model="ir.actions.act_window">
        <field name="name">Inzendingen</field>
        <field name="res_model">otters.consignment.submission</field>
        <field name="view_mode">list,form</field> </record>
    <menuitem id="menu_consignment_root" name="Consignment" sequence="10"/>
    <menuitem id="menu_consignment_submission" name="Inzendingen" parent="menu_consignment_root" action="action_consignment_submission" sequence="10"/>
</odoo>
